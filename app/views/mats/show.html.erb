<script id="card-template" type="text/html">
  <div class="charactercard character-card">
    <div class="character-name">
      <h1>
        <span data-bind="text: name" class="editable"></span><input type="text" data-bind="value: name" />
      </h1>
    </div>

    <div>
      <dl>
        <dt>Class</dt>
        <dd><span data-bind="text: className"></span></dd>
        <dt>Level</dt>
        <dd><span data-bind="text: level" class="editable"></span><input type="text" data-bind="value: level" size="2" /></dd>
        <dt>Life Points</dt>
        <dd><span data-bind="text: lifePoints"></span></dd>
        <dt>Initiative</dt>
        <dd class="character-initiative"><span data-bind="text: initiative"></span></dd>
      </dl>
    </div>

    <div class="characteristics-container">
      <h2>Characteristics</h2>
      <dl>
        <dt>STR</dt>
        <dd>
          <span class="editable" data-bind="text: characteristics.strength"></span>
          <input type="number" data-bind="value: characteristics.strength" size="2"/>
        </dd>
        <dt>CON</dt>
        <dd>
          <span class="editable" data-bind="text: characteristics.constitution"></span>
          <input type="number" data-bind="value: characteristics.constitution" size="2"/>
        </dd>
        <dt>DEX</dt>
        <dd>
          <span class="editable" data-bind="text: characteristics.dexterity"></span>
          <input type="number" data-bind="value: characteristics.dexterity" size="2"/>
        </dd>
        <dt>AGI</dt>
        <dd>
          <span class="editable" data-bind="text: characteristics.agility"></span>
          <input type="number" data-bind="value: characteristics.agility" size="2"/>
        </dd>
        <dt>INT</dt>
        <dd>
          <span class="editable" data-bind="text: characteristics.intelligence"></span>
          <input type="number" data-bind="value: characteristics.intelligence" size="2"/>
        </dd>
        <dt>POW</dt>
        <dd>
          <span class="editable" data-bind="text: characteristics.power"></span>
          <input type="number" data-bind="value: characteristics.power" size="2"/>
        </dd>
        <dt>WP</dt>
        <dd>
          <span class="editable" data-bind="text: characteristics.willpower"></span>
          <input type="number" data-bind="value: characteristics.willpower" size="2"/>
        </dd>
        <dt>PER</dt>
        <dd>
          <span class="editable" data-bind="text: characteristics.perception"></span>
          <input type="number" data-bind="value: characteristics.perception" size="2"/>
        </dd>
      </dl>
    </div>


    <div class="character-actions">
      <button class="action-remove-character">Remove Character</button>
      <button class="action-edit-character" data-bind="click: edit">Edit Character</button>
      <button class="action-clone-character" data-bind="click: cloneCharacter">Clone Character</button>
      <button class="action-attack">Attack</button>
      <button class="action-cast-spell">Cast Spell</button>
    </div>
  </div>
</script>


<div id="actionbar">
  <div>
    <dl>
      <dt>Rounds:</dt>
      <dd><span data-bind="text: nRounds"></span></dd>
    </dl>
  </div>
  <div>
    <button id="actionRollInitiative" data-bind="click: rollInitiative, visible: isGameMaster">
      Roll Initiative
    </button>
    <button id="actionSetTrigger">Set Trigger</button>
    <button id="action-roll-dice">Roll Dices</button>
    <button id="actionInvite" data-bind="visible: isGameMaster">Invite Players</button>
  </div>
</div>


<div id="notice">
  <p><%= notice %></p>
</div>


<div id="mainarea">
  <div id="card-container" data-bind="template: { name: 'card-template', foreach:  characters, afterRender: addItems }">
    <div id="card-add" class="charactercard">
      <div><a href="#"><%= image_tag 'Icon-Plus-128x128.png' %><br/><span>Add Character</span></a></div>
    </div>
  </div>
</div>


<div id="dialog-roll-dice-template" title="Roll Dice" style="display: none;">
  <form>
    <label for="dice-roll-dicecode">
      Dice Code (e.g., 1d10 â€“ <a href="http://www.rolz.org/">Help</a>):
    </label>
    <input type="text" name="dice-roll-dicecode"></input> <button>Roll!</button>
  </form>

  <p class="dialog-roll-dice-result-p" style="display: none;">
    <strong>Result:</strong> <span class="dialog-roll-dice-result"></span>
  </p>

  <form style="display: none;">
    <p class="dice-roll-set-trigger">
      <label for="dialog-roll-dice-trigger-title">Trigger Title:</label>
      <input type="text" name="dialog-roll-dice-trigger-title"/>
    </p>
  </form>
</div>


<div id="dialog-roll-error" title="Error during roll">
  <p>
    <span class="ui-icon ui-icon-alert" style="float: left; margin: 0 7px 50px 0;"></span>
    Your dice roll failed for a technical reason.
  </p>
  <p>Please try again.</p>
</div>


