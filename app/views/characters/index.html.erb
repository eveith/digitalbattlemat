<div id="characters-list" class="content-box">
  <h1>All Characters</h1>
  <div class="toolbar ui-widget-header ui-corner-all">
    <input type="text" value="Search..." style="width: 4em;"/>
    <button id="character-add">Add new Character</button>
  </div>
  <div id="characters-list-items"></div>
</div>

<div id="characters-view" class="content-box">

  <div style="text-align:center" id="character-placeholder" data-bind="ifnot: currentCharacter">
    <h1>Character Details</h1>
    <%= image_tag "Icon-Characters.png" %>
    <p>Select a character on the left site or click the <em>Add</em> button to display details.</p>
  </div>

  <div id="character-details-container" data-bind="template: { name: 'character-template-anima', if: currentCharacter, data: currentCharacter }"></div>
</div>

<%= javascript_tag do -%>
  $(document).ready(function() {

    $("button#character-add").button({
      icons: { primary: "ui-icon-plus" }
    });

    $.getJSON("<%= url_for action: "index" %>")
      .done(function(data) {
        window.charactersModel = new CharactersModel([]);
        ko.applyBindings(window.charactersModel);

        data.forEach(function(o) {
          window.charactersModel.characters.push(ko.mapping.fromJS(o));
        });
      });
  });
<% end -%>

<script type="text/html" id="character-template-anima">
  <h1 data-bind="text: name"></h1>
  <p class="character-details-description" data-bind="htmlValue: description" contenteditable="true"></p>

  <h2>Characteristics</h2>
  <table>
    <thead>
      <th></th>
      <th>Base</th>
      <th>Actual</th>
      <th>Bonus</th>
    </thead>
    <tbody>
      <tr>
        <td>Agility</td>
        <td></td>
        <td></td>
      </tr>
      <tr>
        <td>Constitution</td>
        <td></td>
        <td></td>
      </tr>
      <tr>
        <td>Dexterity</td>
        <td></td>
        <td></td>
      </tr>
      <tr>
        <td>Strength</td>
        <td></td>
        <td></td>
      </tr>
      <tr>
        <td>Intelligence</td>
        <td></td>
        <td></td>
      </tr>
      <tr>
        <td>Perception</td>
        <td></td>
        <td></td>
      </tr>
      <tr>
        <td>Power</td>
        <td></td>
        <td></td>
      </tr>
      <tr>
        <td>Willpower</td>
        <td></td>
        <td></td>
      </tr>
    </tbody>
  </table>
</script>
